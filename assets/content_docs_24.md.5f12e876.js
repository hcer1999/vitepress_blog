import{_ as l,B as o,o as p,c,x as s,a as n,D as e,Q as t}from"./chunks/framework.c6ce8c78.js";const r="/vitepress_blog/assets/01.678071a8.jpg",P=JSON.parse('{"title":"Vite打包优化基本操作","description":"","frontmatter":{"title":"Vite打包优化基本操作","date":"2024-01-03T00:00:00.000Z","permalink":"/content"},"headers":[],"relativePath":"content/docs/24.md","lastUpdated":1704976458000}'),i={name:"content/docs/24.md"},d=s("p",null,"打包优化关联着网站的稳定与加载速度，在开发中也是非常重要的一项",-1),u=s("p",null,[s("img",{src:r,alt:"serverConfig"})],-1),y=s("h2",{id:"vite-自身的构建优化",tabindex:"-1"},[s("code",null,"vite"),n(" 自身的构建优化 "),s("a",{class:"header-anchor",href:"#vite-自身的构建优化","aria-label":'Permalink to "`vite` 自身的构建优化"'},"​")],-1),b=s("a",{href:"https://cn.vitejs.dev/guide/features.html#build-optimizations",target:"_blank",rel:"noreferrer"},"build-optimizations",-1),D=t(`<h2 id="postcss-配置" tabindex="-1"><code>postcss</code> 配置 <a class="header-anchor" href="#postcss-配置" aria-label="Permalink to &quot;\`postcss\` 配置&quot;">​</a></h2><p>postcss 官网：www.postcss.com.cn/</p><p>postcss 是一个用 JavaScript 工具和插件转换 CSS 代码的工具，postcss 自身没有什么功能，只是一个平台，可以下载各种插件，从而实现一些功能！</p><ul><li><code>Autoprefixer</code> 自动获取浏览器的流行度和能够支持的属性，并根据这些数据帮你自动为 CSS 规则添加前缀。</li><li><code>PostCSS Preset Env</code> 帮你将最新的 CSS 语法转换成大多数浏览器都能理解的语法，</li><li>CSS 模块 能让你你永远不用担心命名太大众化而造成冲突，只要用最有意义的名字就行了。 注：<code>PostCSS Preset Env</code> 实际预设了很多好用的 css 插件，完全可以替代<code>autoprefixer</code>使用。</li></ul><p>postcss 可以通过在根目录创建<code>postcss.config.js</code>来进行配置，如：</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> postcssPresetEnv </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">postcss-preset-env</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#89DDFF;">module.exports</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">plugins</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span><span style="color:#82AAFF;">postcssPresetEnv</span><span style="color:#A6ACCD;">(</span><span style="color:#676E95;font-style:italic;">/* pluginOptions */</span><span style="color:#A6ACCD;">)]</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="vite-中配置-postcss" tabindex="-1">Vite 中配置 postcss <a class="header-anchor" href="#vite-中配置-postcss" aria-label="Permalink to &quot;Vite 中配置 postcss&quot;">​</a></h3><ul><li>在 vite.config.js 内的 css.postcss 属性内直接配置</li></ul><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">defineConfig</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">vite</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">defineConfig</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">css</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">postcss</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// 一些配置</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="postcss-preset-env" tabindex="-1">postcss-preset-env <a class="header-anchor" href="#postcss-preset-env" aria-label="Permalink to &quot;postcss-preset-env&quot;">​</a></h4><p>我们主要使用<code>postcss-preset-env</code>插件，这个插件支持 css 变量和一些未来 css 语法以及自动补全(autoprefixer)</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight has-highlighted-lines"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">defineConfig</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">vite</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> postcssPresetEnv </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">postcss-preset-env</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">defineConfig</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">css</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">postcss</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">plugins</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">postcssPresetEnv</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line highlighted"><span style="color:#89DDFF;">          </span><span style="color:#676E95;font-style:italic;">// 其他选项</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">          </span><span style="color:#F07178;">stage</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// 0-4 0是最高级别 4是最低级别 默认是2 这个选项是指定要支持的浏览器版本</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">          </span><span style="color:#F07178;">autoprefixer</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">            </span><span style="color:#F07178;">grid</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// 是否自动添加前缀</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">          </span><span style="color:#89DDFF;">}</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">      ]</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="组件、工具库" tabindex="-1">组件、工具库 <a class="header-anchor" href="#组件、工具库" aria-label="Permalink to &quot;组件、工具库&quot;">​</a></h2><ul><li><p>无论是组件（如 <code>element-plus</code>），还是工具库（如 <code>lodash</code>、<code>axios</code>）我们都应该尽可能的按需引入，使其有良好的  <code>tree-shaking</code> 效果，这样项目整体打包出来的无用代码就少之又少了</p></li><li><p>拿 <code>lodash</code> 举例，<code>lodash</code> 默认是 <code>cjs</code> 格式，不支持 <code>es6</code> 的 <code>import</code> 语法，那么我们就可以去 <code>github</code> 或者某些搜索引擎去寻找替代品，最终平台找到了 <code>lodash-unified</code>，它完全兼容 <code>lodash</code> 的全部语法并且既支持 <code>esm</code> 又支持 <code>cjs</code>，这使得它无论在浏览器还是 <code>node</code> 环境中表现都很良好。当然如果遇到那种只支持 <code>cjs</code> 格式，网上找遍了都找不到兼容 <code>esm</code> 格式的咋办呢，这时你可以参考 <code>lodash-unified</code>，看看别人是如何转换的 😊</p></li><li><p>平台精简版首次启动时间我这边测试是 <code>6</code> 秒，刷新页面的话开启 <a href="https://gitee.com/yiming_chang/pure-admin-thin/blob/main/public/serverConfig.json#L19" target="_blank" rel="noreferrer">CachingAsyncRoutes</a> 可能连 <code>1</code> 秒都不要，可看下面的视频。如果您使用 <code>pure-admin</code> 且当前网页<code>首启动</code>和<code>刷新页面</code>的等待时间远远大于前面的数字，也该考虑优化了。当项目具有一定规模的时候，优化并没有那么容易，所以您在写代码前就应该遵循我上面的说法，按需引入才是 <code>yyds</code> 😄<br><video width="320" height="240" controls><source src="https://cdn.bingkele.cc/001.mov" type="video/mp4"></video></p></li><li><p><code>vite</code> 目前最大的性能瓶颈是大量模块的首页加载，可看 <a href="https://github.com/vitejs/vite/issues/1309#issue-777569758" target="_blank" rel="noreferrer">vite-issues</a>，值得期待的是这个 <a href="https://github.com/vitejs/vite/pull/10671" target="_blank" rel="noreferrer">pr</a> 可能会缓解这个麻烦</p></li></ul><h2 id="压缩-gzip、brotli-格式" tabindex="-1">压缩 <code>gzip</code>、<code>brotli</code> 格式 <a class="header-anchor" href="#压缩-gzip、brotli-格式" aria-label="Permalink to &quot;压缩 \`gzip\`、\`brotli\` 格式&quot;">​</a></h2><p>使用 <a href="https://github.com/vbenjs/vite-plugin-compression" target="_blank" rel="noreferrer">vite-plugin-compression</a> 对平台进行 <code>gzip</code> 或者 <code>brotli</code> 压缩，<code>nginx</code> 对这两种压缩模式都支持，压缩后部署到 <code>nginx</code> 将极大提高网页加载速度</p><h3 id="如何开启压缩" tabindex="-1">如何开启压缩 <a class="header-anchor" href="#如何开启压缩" aria-label="Permalink to &quot;如何开启压缩&quot;">​</a></h3><p>来到 <code>.env.production</code> 文件，设置 <a href="https://gitee.com/yiming_chang/pure-admin-thin/blob/main/.env.production#L13" target="_blank" rel="noreferrer">VITE_COMPRESSION</a> 即可。设置总体分为下面两种 <a href="https://gitee.com/yiming_chang/pure-admin-thin/blob/main/build/compress.ts" target="_blank" rel="noreferrer">具体实现代码</a></p><h4 id="两种总体设置" tabindex="-1">两种总体设置 <a class="header-anchor" href="#两种总体设置" aria-label="Permalink to &quot;两种总体设置&quot;">​</a></h4><ol><li>压缩时不删除原始文件的配置</li><li>压缩时删除原始文件的配置</li></ol><h5 id="压缩时不删除原始文件的配置" tabindex="-1">压缩时不删除原始文件的配置 <a class="header-anchor" href="#压缩时不删除原始文件的配置" aria-label="Permalink to &quot;压缩时不删除原始文件的配置&quot;">​</a></h5><div class="language-.env.production line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">.env.production</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">开启 gzip 压缩</span></span>
<span class="line"><span style="color:#A6ACCD;">VITE_COMPRESSION = &quot;gzip&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">开启 brotli 压缩</span></span>
<span class="line"><span style="color:#A6ACCD;">VITE_COMPRESSION = &quot;brotli&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;"># 同时开启 gzip 与 brotli 压缩</span></span>
<span class="line"><span style="color:#A6ACCD;">VITE_COMPRESSION = &quot;both&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;"># 不开启压缩，默认</span></span>
<span class="line"><span style="color:#A6ACCD;">VITE_COMPRESSION = &quot;none&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h5 id="压缩时删除原始文件的配置" tabindex="-1">压缩时删除原始文件的配置 <a class="header-anchor" href="#压缩时删除原始文件的配置" aria-label="Permalink to &quot;压缩时删除原始文件的配置&quot;">​</a></h5><div class="language-.env.production line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">.env.production</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">开启 gzip 压缩</span></span>
<span class="line"><span style="color:#A6ACCD;">VITE_COMPRESSION = &quot;gzip-clear&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">开启 brotli 压缩</span></span>
<span class="line"><span style="color:#A6ACCD;">VITE_COMPRESSION = &quot;brotli-clear&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;"># 同时开启 gzip 与 brotli 压缩</span></span>
<span class="line"><span style="color:#A6ACCD;">VITE_COMPRESSION = &quot;both-clear&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;"># 不开启压缩，默认</span></span>
<span class="line"><span style="color:#A6ACCD;">VITE_COMPRESSION = &quot;none&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="采用-cdn-模式替换本地依赖" tabindex="-1">采用 <code>cdn</code> 模式替换本地依赖 <a class="header-anchor" href="#采用-cdn-模式替换本地依赖" aria-label="Permalink to &quot;采用 \`cdn\` 模式替换本地依赖&quot;">​</a></h2><h3 id="vite-插件" tabindex="-1"><code>vite</code> 插件 <a class="header-anchor" href="#vite-插件" aria-label="Permalink to &quot;\`vite\` 插件&quot;">​</a></h3><p>使用 <a href="https://github.com/MMF-FE/vite-plugin-cdn-import/blob/master/README.zh-CN.md" target="_blank" rel="noreferrer">vite-plugin-cdn-import</a> 插件，在打包时将指定的 <code>modules</code> 替换成 <code>cdn</code> 链接，从而减少构建时间，提高生产环境中页面加载速度。</p><h3 id="cdn-厂商-免费" tabindex="-1"><code>cdn</code> 厂商（免费） <a class="header-anchor" href="#cdn-厂商-免费" aria-label="Permalink to &quot;\`cdn\` 厂商（免费）&quot;">​</a></h3><p>平台 <code>cdn</code> 采用的是国内 <a href="https://www.bootcdn.cn" target="_blank" rel="noreferrer">bootcdn</a>，主要是稳定并且快，当然您也可以选择 <a href="https://unpkg.com" target="_blank" rel="noreferrer">unpkg</a> 或者 <a href="https://www.jsdelivr.com" target="_blank" rel="noreferrer">jsdelivr</a>，这两个 <code>cdn</code> 是国外的</p><h3 id="如何启动-cdn-替换" tabindex="-1">如何启动 <code>cdn</code> 替换 <a class="header-anchor" href="#如何启动-cdn-替换" aria-label="Permalink to &quot;如何启动 \`cdn\` 替换&quot;">​</a></h3><p>来到 <code>.env.production</code> 文件，将 <a href="https://gitee.com/yiming_chang/pure-admin-thin/blob/main/.env.production#L8" target="_blank" rel="noreferrer">VITE_CDN</a> 设置成 <code>true</code> 即可</p><h3 id="默认启动-cdn-替换的模块有哪些" tabindex="-1">默认启动 <code>cdn</code> 替换的模块有哪些 <a class="header-anchor" href="#默认启动-cdn-替换的模块有哪些" aria-label="Permalink to &quot;默认启动 \`cdn\` 替换的模块有哪些&quot;">​</a></h3><p><code>vue</code>、<code>vue-router</code>、<code>vue-demi</code>、<code>pinia</code>、<code>element-plus</code>、<code>axios</code>、<code>dayjs</code>、<code>echarts</code> 具体代码 <a href="https://gitee.com/yiming_chang/pure-admin-thin/blob/main/build/cdn.ts" target="_blank" rel="noreferrer">build/cdn.ts</a></p><h2 id="生产环境删除-console-log" tabindex="-1">生产环境删除 <code>console.log</code> <a class="header-anchor" href="#生产环境删除-console-log" aria-label="Permalink to &quot;生产环境删除 \`console.log\`&quot;">​</a></h2><p>使用平台开发的 <a href="https://github.com/xiaoxian521/vite-plugin-remove-console" target="_blank" rel="noreferrer">vite-plugin-remove-console</a> 插件，在打包构建时移除平台中所有的 <code>console.log</code></p><h2 id="静态资源分类打包" tabindex="-1">静态资源分类打包 <a class="header-anchor" href="#静态资源分类打包" aria-label="Permalink to &quot;静态资源分类打包&quot;">​</a></h2><p><code>vite</code> 是基于 <code>esbuild</code> 和 <code>rollup</code> 构建的，在打包时如果不进行 <code>output</code> 的配置，就会把所有文件都混在一起）</p><p>在配置<code>output</code>后的效果，所有文件都进行了分类存放，这也方便我们查找文件</p><p>来到 vite.config.js 文件，可以看到我们对 output 进行了如下配置</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight has-highlighted-lines"><code><span class="line"><span style="color:#FFCB6B;">build</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#FFCB6B;">sourcemap</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// 消除打包大小超过500kb警告</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#FFCB6B;">chunkSizeWarningLimit</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">4000</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#FFCB6B;">rollupOptions</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#FFCB6B;">input</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#FFCB6B;">index</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">pathResolve</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">index.html</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line highlighted"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 静态资源分类打包</span></span>
<span class="line highlighted"><span style="color:#F07178;">    </span><span style="color:#FFCB6B;">output</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line highlighted"><span style="color:#F07178;">      </span><span style="color:#FFCB6B;">chunkFileNames</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">static/js/[name]-[hash].js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line highlighted"><span style="color:#F07178;">      </span><span style="color:#FFCB6B;">entryFileNames</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">static/js/[name]-[hash].js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line highlighted"><span style="color:#F07178;">      </span><span style="color:#FFCB6B;">assetFileNames</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">static/[ext]/[name]-[hash].[ext]</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">相关推荐</p><p><a href="https://github.com/sanyuan0704/vite-plugin-chunk-split/blob/master/README-CN.md" target="_blank" rel="noreferrer">Vite 代码拆包插件。支持多种拆包策略，可避免手动操作 manualChunks 潜在的循环依赖问题</a></p></div><h2 id="svg-压缩" tabindex="-1"><code>svg</code> 压缩 <a class="header-anchor" href="#svg-压缩" aria-label="Permalink to &quot;\`svg\` 压缩&quot;">​</a></h2><p>一般下载的 <code>svg</code> 或者复制的 <code>svg</code> 代码，里面存在一些无关紧要的元素，可以将其剔除，毫无影响地降低 <code>svg</code> 大小<br> 平台使用了 <a href="https://www.npmjs.com/package/svgo" target="_blank" rel="noreferrer">svgo</a> 工具对所有 <code>svg</code> 进行了压缩，您拉取平台代码时所有 <code>svg</code> 都已经最简了哦。当然您会问自己新加的 <code>svg</code> 如何精简呢，来到 <a href="https://gitee.com/yiming_chang/pure-admin-thin/blob/main/package.json#L14" target="_blank" rel="noreferrer">main/package.json</a>，可以看到平台默认使用 <code>svgo</code> 工具对 <code>src/assets/svg</code> 文件夹里的所有 <code>svg</code> 进行压缩，这是可以改动的，只需要将 <code>-f</code> 和 <code>-o</code> 后的路径改为您需要压缩的 <code>svg</code> 路径即可。温馨提示：只需要运行 <code>pnpm svgo</code> 命令对 <code>svg</code> 文件进行一次压缩即可</p>`,43),h={class:"tip custom-block"},F=s("p",{class:"custom-block-title"},"推荐阅读",-1),C=s("a",{href:"https://cn.vuejs.org/guide/best-practices/performance.html",target:"_blank",rel:"noreferrer"},"性能优化",-1),m=s("a",{href:"https://router.vuejs.org/zh/guide/advanced/lazy-loading.html#%E4%BD%BF%E7%94%A8-vite",target:"_blank",rel:"noreferrer"},"Vite 中组件按组分块打包",-1),A=s("div",{class:"tip custom-block"},[s("p",{class:"custom-block-title"},"传送门"),s("p",null,[s("a",{href:"https://yiming_chang.gitee.io/pure-admin-doc/pages/buildgood/#vite-%E8%87%AA%E8%BA%AB%E7%9A%84%E6%9E%84%E5%BB%BA%E4%BC%98%E5%8C%96",target:"_blank",rel:"noreferrer"},"原文地址")])],-1);function g(v,f,_,k,q,E){const a=o("Badge");return p(),c("div",null,[d,u,y,s("p",null,[n("点击查看 "),b,n(),e(a,{text:"vite官方文档"})]),D,s("div",h,[F,s("ul",null,[s("li",null,[C,n(),e(a,{text:"vue文档"})]),s("li",null,[m,n(),e(a,{text:"vue-router文档"})])])]),A])}const S=l(i,[["render",g]]);export{P as __pageData,S as default};
