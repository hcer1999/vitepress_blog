import{_ as l,B as o,o as p,c,x as s,a as n,D as e,Q as t}from"./chunks/framework.c6ce8c78.js";const r="/vitepress_blog/assets/01.678071a8.jpg",P=JSON.parse('{"title":"Viteæ‰“åŒ…ä¼˜åŒ–åŸºæœ¬æ“ä½œ","description":"","frontmatter":{"title":"Viteæ‰“åŒ…ä¼˜åŒ–åŸºæœ¬æ“ä½œ","date":"2024-01-03T00:00:00.000Z","permalink":"/content"},"headers":[],"relativePath":"content/docs/24.md","lastUpdated":1704976458000}'),i={name:"content/docs/24.md"},d=s("p",null,"æ‰“åŒ…ä¼˜åŒ–å…³è”ç€ç½‘ç«™çš„ç¨³å®šä¸åŠ è½½é€Ÿåº¦ï¼Œåœ¨å¼€å‘ä¸­ä¹Ÿæ˜¯éå¸¸é‡è¦çš„ä¸€é¡¹",-1),u=s("p",null,[s("img",{src:r,alt:"serverConfig"})],-1),y=s("h2",{id:"vite-è‡ªèº«çš„æ„å»ºä¼˜åŒ–",tabindex:"-1"},[s("code",null,"vite"),n(" è‡ªèº«çš„æ„å»ºä¼˜åŒ– "),s("a",{class:"header-anchor",href:"#vite-è‡ªèº«çš„æ„å»ºä¼˜åŒ–","aria-label":'Permalink to "`vite` è‡ªèº«çš„æ„å»ºä¼˜åŒ–"'},"â€‹")],-1),b=s("a",{href:"https://cn.vitejs.dev/guide/features.html#build-optimizations",target:"_blank",rel:"noreferrer"},"build-optimizations",-1),D=t(`<h2 id="postcss-é…ç½®" tabindex="-1"><code>postcss</code> é…ç½® <a class="header-anchor" href="#postcss-é…ç½®" aria-label="Permalink to &quot;\`postcss\` é…ç½®&quot;">â€‹</a></h2><p>postcss å®˜ç½‘ï¼šwww.postcss.com.cn/</p><p>postcss æ˜¯ä¸€ä¸ªç”¨ JavaScript å·¥å…·å’Œæ’ä»¶è½¬æ¢ CSS ä»£ç çš„å·¥å…·ï¼Œpostcss è‡ªèº«æ²¡æœ‰ä»€ä¹ˆåŠŸèƒ½ï¼Œåªæ˜¯ä¸€ä¸ªå¹³å°ï¼Œå¯ä»¥ä¸‹è½½å„ç§æ’ä»¶ï¼Œä»è€Œå®ç°ä¸€äº›åŠŸèƒ½ï¼</p><ul><li><code>Autoprefixer</code> è‡ªåŠ¨è·å–æµè§ˆå™¨çš„æµè¡Œåº¦å’Œèƒ½å¤Ÿæ”¯æŒçš„å±æ€§ï¼Œå¹¶æ ¹æ®è¿™äº›æ•°æ®å¸®ä½ è‡ªåŠ¨ä¸º CSS è§„åˆ™æ·»åŠ å‰ç¼€ã€‚</li><li><code>PostCSS Preset Env</code> å¸®ä½ å°†æœ€æ–°çš„ CSS è¯­æ³•è½¬æ¢æˆå¤§å¤šæ•°æµè§ˆå™¨éƒ½èƒ½ç†è§£çš„è¯­æ³•ï¼Œ</li><li>CSS æ¨¡å— èƒ½è®©ä½ ä½ æ°¸è¿œä¸ç”¨æ‹…å¿ƒå‘½åå¤ªå¤§ä¼—åŒ–è€Œé€ æˆå†²çªï¼Œåªè¦ç”¨æœ€æœ‰æ„ä¹‰çš„åå­—å°±è¡Œäº†ã€‚ æ³¨ï¼š<code>PostCSS Preset Env</code> å®é™…é¢„è®¾äº†å¾ˆå¤šå¥½ç”¨çš„ css æ’ä»¶ï¼Œå®Œå…¨å¯ä»¥æ›¿ä»£<code>autoprefixer</code>ä½¿ç”¨ã€‚</li></ul><p>postcss å¯ä»¥é€šè¿‡åœ¨æ ¹ç›®å½•åˆ›å»º<code>postcss.config.js</code>æ¥è¿›è¡Œé…ç½®ï¼Œå¦‚ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> postcssPresetEnv </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">postcss-preset-env</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#89DDFF;">module.exports</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">plugins</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span><span style="color:#82AAFF;">postcssPresetEnv</span><span style="color:#A6ACCD;">(</span><span style="color:#676E95;font-style:italic;">/* pluginOptions */</span><span style="color:#A6ACCD;">)]</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="vite-ä¸­é…ç½®-postcss" tabindex="-1">Vite ä¸­é…ç½® postcss <a class="header-anchor" href="#vite-ä¸­é…ç½®-postcss" aria-label="Permalink to &quot;Vite ä¸­é…ç½® postcss&quot;">â€‹</a></h3><ul><li>åœ¨ vite.config.js å†…çš„ css.postcss å±æ€§å†…ç›´æ¥é…ç½®</li></ul><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">defineConfig</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">vite</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">defineConfig</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">css</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">postcss</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// ä¸€äº›é…ç½®</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="postcss-preset-env" tabindex="-1">postcss-preset-env <a class="header-anchor" href="#postcss-preset-env" aria-label="Permalink to &quot;postcss-preset-env&quot;">â€‹</a></h4><p>æˆ‘ä»¬ä¸»è¦ä½¿ç”¨<code>postcss-preset-env</code>æ’ä»¶ï¼Œè¿™ä¸ªæ’ä»¶æ”¯æŒ css å˜é‡å’Œä¸€äº›æœªæ¥ css è¯­æ³•ä»¥åŠè‡ªåŠ¨è¡¥å…¨(autoprefixer)</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight has-highlighted-lines"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">defineConfig</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">vite</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> postcssPresetEnv </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">postcss-preset-env</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">defineConfig</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">css</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">postcss</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">plugins</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">postcssPresetEnv</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line highlighted"><span style="color:#89DDFF;">          </span><span style="color:#676E95;font-style:italic;">// å…¶ä»–é€‰é¡¹</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">          </span><span style="color:#F07178;">stage</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// 0-4 0æ˜¯æœ€é«˜çº§åˆ« 4æ˜¯æœ€ä½çº§åˆ« é»˜è®¤æ˜¯2 è¿™ä¸ªé€‰é¡¹æ˜¯æŒ‡å®šè¦æ”¯æŒçš„æµè§ˆå™¨ç‰ˆæœ¬</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">          </span><span style="color:#F07178;">autoprefixer</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">            </span><span style="color:#F07178;">grid</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// æ˜¯å¦è‡ªåŠ¨æ·»åŠ å‰ç¼€</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">          </span><span style="color:#89DDFF;">}</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">      ]</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="ç»„ä»¶ã€å·¥å…·åº“" tabindex="-1">ç»„ä»¶ã€å·¥å…·åº“ <a class="header-anchor" href="#ç»„ä»¶ã€å·¥å…·åº“" aria-label="Permalink to &quot;ç»„ä»¶ã€å·¥å…·åº“&quot;">â€‹</a></h2><ul><li><p>æ— è®ºæ˜¯ç»„ä»¶ï¼ˆå¦‚ <code>element-plus</code>ï¼‰ï¼Œè¿˜æ˜¯å·¥å…·åº“ï¼ˆå¦‚ <code>lodash</code>ã€<code>axios</code>ï¼‰æˆ‘ä»¬éƒ½åº”è¯¥å°½å¯èƒ½çš„æŒ‰éœ€å¼•å…¥ï¼Œä½¿å…¶æœ‰è‰¯å¥½çš„ Â <code>tree-shaking</code> æ•ˆæœï¼Œè¿™æ ·é¡¹ç›®æ•´ä½“æ‰“åŒ…å‡ºæ¥çš„æ— ç”¨ä»£ç å°±å°‘ä¹‹åˆå°‘äº†</p></li><li><p>æ‹¿ <code>lodash</code> ä¸¾ä¾‹ï¼Œ<code>lodash</code> é»˜è®¤æ˜¯ <code>cjs</code> æ ¼å¼ï¼Œä¸æ”¯æŒ <code>es6</code> çš„ <code>import</code> è¯­æ³•ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥å» <code>github</code> æˆ–è€…æŸäº›æœç´¢å¼•æ“å»å¯»æ‰¾æ›¿ä»£å“ï¼Œæœ€ç»ˆå¹³å°æ‰¾åˆ°äº† <code>lodash-unified</code>ï¼Œå®ƒå®Œå…¨å…¼å®¹ <code>lodash</code> çš„å…¨éƒ¨è¯­æ³•å¹¶ä¸”æ—¢æ”¯æŒ <code>esm</code> åˆæ”¯æŒ <code>cjs</code>ï¼Œè¿™ä½¿å¾—å®ƒæ— è®ºåœ¨æµè§ˆå™¨è¿˜æ˜¯ <code>node</code> ç¯å¢ƒä¸­è¡¨ç°éƒ½å¾ˆè‰¯å¥½ã€‚å½“ç„¶å¦‚æœé‡åˆ°é‚£ç§åªæ”¯æŒ <code>cjs</code> æ ¼å¼ï¼Œç½‘ä¸Šæ‰¾éäº†éƒ½æ‰¾ä¸åˆ°å…¼å®¹ <code>esm</code> æ ¼å¼çš„å’‹åŠå‘¢ï¼Œè¿™æ—¶ä½ å¯ä»¥å‚è€ƒ <code>lodash-unified</code>ï¼Œçœ‹çœ‹åˆ«äººæ˜¯å¦‚ä½•è½¬æ¢çš„ ğŸ˜Š</p></li><li><p>å¹³å°ç²¾ç®€ç‰ˆé¦–æ¬¡å¯åŠ¨æ—¶é—´æˆ‘è¿™è¾¹æµ‹è¯•æ˜¯ <code>6</code> ç§’ï¼Œåˆ·æ–°é¡µé¢çš„è¯å¼€å¯ <a href="https://gitee.com/yiming_chang/pure-admin-thin/blob/main/public/serverConfig.json#L19" target="_blank" rel="noreferrer">CachingAsyncRoutes</a> å¯èƒ½è¿ <code>1</code> ç§’éƒ½ä¸è¦ï¼Œå¯çœ‹ä¸‹é¢çš„è§†é¢‘ã€‚å¦‚æœæ‚¨ä½¿ç”¨ <code>pure-admin</code> ä¸”å½“å‰ç½‘é¡µ<code>é¦–å¯åŠ¨</code>å’Œ<code>åˆ·æ–°é¡µé¢</code>çš„ç­‰å¾…æ—¶é—´è¿œè¿œå¤§äºå‰é¢çš„æ•°å­—ï¼Œä¹Ÿè¯¥è€ƒè™‘ä¼˜åŒ–äº†ã€‚å½“é¡¹ç›®å…·æœ‰ä¸€å®šè§„æ¨¡çš„æ—¶å€™ï¼Œä¼˜åŒ–å¹¶æ²¡æœ‰é‚£ä¹ˆå®¹æ˜“ï¼Œæ‰€ä»¥æ‚¨åœ¨å†™ä»£ç å‰å°±åº”è¯¥éµå¾ªæˆ‘ä¸Šé¢çš„è¯´æ³•ï¼ŒæŒ‰éœ€å¼•å…¥æ‰æ˜¯ <code>yyds</code> ğŸ˜„<br><video width="320" height="240" controls><source src="https://cdn.bingkele.cc/001.mov" type="video/mp4"></video></p></li><li><p><code>vite</code> ç›®å‰æœ€å¤§çš„æ€§èƒ½ç“¶é¢ˆæ˜¯å¤§é‡æ¨¡å—çš„é¦–é¡µåŠ è½½ï¼Œå¯çœ‹ <a href="https://github.com/vitejs/vite/issues/1309#issue-777569758" target="_blank" rel="noreferrer">vite-issues</a>ï¼Œå€¼å¾—æœŸå¾…çš„æ˜¯è¿™ä¸ª <a href="https://github.com/vitejs/vite/pull/10671" target="_blank" rel="noreferrer">pr</a> å¯èƒ½ä¼šç¼“è§£è¿™ä¸ªéº»çƒ¦</p></li></ul><h2 id="å‹ç¼©-gzipã€brotli-æ ¼å¼" tabindex="-1">å‹ç¼© <code>gzip</code>ã€<code>brotli</code> æ ¼å¼ <a class="header-anchor" href="#å‹ç¼©-gzipã€brotli-æ ¼å¼" aria-label="Permalink to &quot;å‹ç¼© \`gzip\`ã€\`brotli\` æ ¼å¼&quot;">â€‹</a></h2><p>ä½¿ç”¨ <a href="https://github.com/vbenjs/vite-plugin-compression" target="_blank" rel="noreferrer">vite-plugin-compression</a> å¯¹å¹³å°è¿›è¡Œ <code>gzip</code> æˆ–è€… <code>brotli</code> å‹ç¼©ï¼Œ<code>nginx</code> å¯¹è¿™ä¸¤ç§å‹ç¼©æ¨¡å¼éƒ½æ”¯æŒï¼Œå‹ç¼©åéƒ¨ç½²åˆ° <code>nginx</code> å°†æå¤§æé«˜ç½‘é¡µåŠ è½½é€Ÿåº¦</p><h3 id="å¦‚ä½•å¼€å¯å‹ç¼©" tabindex="-1">å¦‚ä½•å¼€å¯å‹ç¼© <a class="header-anchor" href="#å¦‚ä½•å¼€å¯å‹ç¼©" aria-label="Permalink to &quot;å¦‚ä½•å¼€å¯å‹ç¼©&quot;">â€‹</a></h3><p>æ¥åˆ° <code>.env.production</code> æ–‡ä»¶ï¼Œè®¾ç½® <a href="https://gitee.com/yiming_chang/pure-admin-thin/blob/main/.env.production#L13" target="_blank" rel="noreferrer">VITE_COMPRESSION</a> å³å¯ã€‚è®¾ç½®æ€»ä½“åˆ†ä¸ºä¸‹é¢ä¸¤ç§ <a href="https://gitee.com/yiming_chang/pure-admin-thin/blob/main/build/compress.ts" target="_blank" rel="noreferrer">å…·ä½“å®ç°ä»£ç </a></p><h4 id="ä¸¤ç§æ€»ä½“è®¾ç½®" tabindex="-1">ä¸¤ç§æ€»ä½“è®¾ç½® <a class="header-anchor" href="#ä¸¤ç§æ€»ä½“è®¾ç½®" aria-label="Permalink to &quot;ä¸¤ç§æ€»ä½“è®¾ç½®&quot;">â€‹</a></h4><ol><li>å‹ç¼©æ—¶ä¸åˆ é™¤åŸå§‹æ–‡ä»¶çš„é…ç½®</li><li>å‹ç¼©æ—¶åˆ é™¤åŸå§‹æ–‡ä»¶çš„é…ç½®</li></ol><h5 id="å‹ç¼©æ—¶ä¸åˆ é™¤åŸå§‹æ–‡ä»¶çš„é…ç½®" tabindex="-1">å‹ç¼©æ—¶ä¸åˆ é™¤åŸå§‹æ–‡ä»¶çš„é…ç½® <a class="header-anchor" href="#å‹ç¼©æ—¶ä¸åˆ é™¤åŸå§‹æ–‡ä»¶çš„é…ç½®" aria-label="Permalink to &quot;å‹ç¼©æ—¶ä¸åˆ é™¤åŸå§‹æ–‡ä»¶çš„é…ç½®&quot;">â€‹</a></h5><div class="language-.env.production line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">.env.production</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">å¼€å¯ gzip å‹ç¼©</span></span>
<span class="line"><span style="color:#A6ACCD;">VITE_COMPRESSION = &quot;gzip&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">å¼€å¯ brotli å‹ç¼©</span></span>
<span class="line"><span style="color:#A6ACCD;">VITE_COMPRESSION = &quot;brotli&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;"># åŒæ—¶å¼€å¯ gzip ä¸ brotli å‹ç¼©</span></span>
<span class="line"><span style="color:#A6ACCD;">VITE_COMPRESSION = &quot;both&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;"># ä¸å¼€å¯å‹ç¼©ï¼Œé»˜è®¤</span></span>
<span class="line"><span style="color:#A6ACCD;">VITE_COMPRESSION = &quot;none&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h5 id="å‹ç¼©æ—¶åˆ é™¤åŸå§‹æ–‡ä»¶çš„é…ç½®" tabindex="-1">å‹ç¼©æ—¶åˆ é™¤åŸå§‹æ–‡ä»¶çš„é…ç½® <a class="header-anchor" href="#å‹ç¼©æ—¶åˆ é™¤åŸå§‹æ–‡ä»¶çš„é…ç½®" aria-label="Permalink to &quot;å‹ç¼©æ—¶åˆ é™¤åŸå§‹æ–‡ä»¶çš„é…ç½®&quot;">â€‹</a></h5><div class="language-.env.production line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">.env.production</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">å¼€å¯ gzip å‹ç¼©</span></span>
<span class="line"><span style="color:#A6ACCD;">VITE_COMPRESSION = &quot;gzip-clear&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">å¼€å¯ brotli å‹ç¼©</span></span>
<span class="line"><span style="color:#A6ACCD;">VITE_COMPRESSION = &quot;brotli-clear&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;"># åŒæ—¶å¼€å¯ gzip ä¸ brotli å‹ç¼©</span></span>
<span class="line"><span style="color:#A6ACCD;">VITE_COMPRESSION = &quot;both-clear&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;"># ä¸å¼€å¯å‹ç¼©ï¼Œé»˜è®¤</span></span>
<span class="line"><span style="color:#A6ACCD;">VITE_COMPRESSION = &quot;none&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="é‡‡ç”¨-cdn-æ¨¡å¼æ›¿æ¢æœ¬åœ°ä¾èµ–" tabindex="-1">é‡‡ç”¨ <code>cdn</code> æ¨¡å¼æ›¿æ¢æœ¬åœ°ä¾èµ– <a class="header-anchor" href="#é‡‡ç”¨-cdn-æ¨¡å¼æ›¿æ¢æœ¬åœ°ä¾èµ–" aria-label="Permalink to &quot;é‡‡ç”¨ \`cdn\` æ¨¡å¼æ›¿æ¢æœ¬åœ°ä¾èµ–&quot;">â€‹</a></h2><h3 id="vite-æ’ä»¶" tabindex="-1"><code>vite</code> æ’ä»¶ <a class="header-anchor" href="#vite-æ’ä»¶" aria-label="Permalink to &quot;\`vite\` æ’ä»¶&quot;">â€‹</a></h3><p>ä½¿ç”¨ <a href="https://github.com/MMF-FE/vite-plugin-cdn-import/blob/master/README.zh-CN.md" target="_blank" rel="noreferrer">vite-plugin-cdn-import</a> æ’ä»¶ï¼Œåœ¨æ‰“åŒ…æ—¶å°†æŒ‡å®šçš„ <code>modules</code> æ›¿æ¢æˆ <code>cdn</code> é“¾æ¥ï¼Œä»è€Œå‡å°‘æ„å»ºæ—¶é—´ï¼Œæé«˜ç”Ÿäº§ç¯å¢ƒä¸­é¡µé¢åŠ è½½é€Ÿåº¦ã€‚</p><h3 id="cdn-å‚å•†-å…è´¹" tabindex="-1"><code>cdn</code> å‚å•†ï¼ˆå…è´¹ï¼‰ <a class="header-anchor" href="#cdn-å‚å•†-å…è´¹" aria-label="Permalink to &quot;\`cdn\` å‚å•†ï¼ˆå…è´¹ï¼‰&quot;">â€‹</a></h3><p>å¹³å° <code>cdn</code> é‡‡ç”¨çš„æ˜¯å›½å†… <a href="https://www.bootcdn.cn" target="_blank" rel="noreferrer">bootcdn</a>ï¼Œä¸»è¦æ˜¯ç¨³å®šå¹¶ä¸”å¿«ï¼Œå½“ç„¶æ‚¨ä¹Ÿå¯ä»¥é€‰æ‹© <a href="https://unpkg.com" target="_blank" rel="noreferrer">unpkg</a> æˆ–è€… <a href="https://www.jsdelivr.com" target="_blank" rel="noreferrer">jsdelivr</a>ï¼Œè¿™ä¸¤ä¸ª <code>cdn</code> æ˜¯å›½å¤–çš„</p><h3 id="å¦‚ä½•å¯åŠ¨-cdn-æ›¿æ¢" tabindex="-1">å¦‚ä½•å¯åŠ¨ <code>cdn</code> æ›¿æ¢ <a class="header-anchor" href="#å¦‚ä½•å¯åŠ¨-cdn-æ›¿æ¢" aria-label="Permalink to &quot;å¦‚ä½•å¯åŠ¨ \`cdn\` æ›¿æ¢&quot;">â€‹</a></h3><p>æ¥åˆ° <code>.env.production</code> æ–‡ä»¶ï¼Œå°† <a href="https://gitee.com/yiming_chang/pure-admin-thin/blob/main/.env.production#L8" target="_blank" rel="noreferrer">VITE_CDN</a> è®¾ç½®æˆ <code>true</code> å³å¯</p><h3 id="é»˜è®¤å¯åŠ¨-cdn-æ›¿æ¢çš„æ¨¡å—æœ‰å“ªäº›" tabindex="-1">é»˜è®¤å¯åŠ¨ <code>cdn</code> æ›¿æ¢çš„æ¨¡å—æœ‰å“ªäº› <a class="header-anchor" href="#é»˜è®¤å¯åŠ¨-cdn-æ›¿æ¢çš„æ¨¡å—æœ‰å“ªäº›" aria-label="Permalink to &quot;é»˜è®¤å¯åŠ¨ \`cdn\` æ›¿æ¢çš„æ¨¡å—æœ‰å“ªäº›&quot;">â€‹</a></h3><p><code>vue</code>ã€<code>vue-router</code>ã€<code>vue-demi</code>ã€<code>pinia</code>ã€<code>element-plus</code>ã€<code>axios</code>ã€<code>dayjs</code>ã€<code>echarts</code> å…·ä½“ä»£ç  <a href="https://gitee.com/yiming_chang/pure-admin-thin/blob/main/build/cdn.ts" target="_blank" rel="noreferrer">build/cdn.ts</a></p><h2 id="ç”Ÿäº§ç¯å¢ƒåˆ é™¤-console-log" tabindex="-1">ç”Ÿäº§ç¯å¢ƒåˆ é™¤ <code>console.log</code> <a class="header-anchor" href="#ç”Ÿäº§ç¯å¢ƒåˆ é™¤-console-log" aria-label="Permalink to &quot;ç”Ÿäº§ç¯å¢ƒåˆ é™¤ \`console.log\`&quot;">â€‹</a></h2><p>ä½¿ç”¨å¹³å°å¼€å‘çš„ <a href="https://github.com/xiaoxian521/vite-plugin-remove-console" target="_blank" rel="noreferrer">vite-plugin-remove-console</a> æ’ä»¶ï¼Œåœ¨æ‰“åŒ…æ„å»ºæ—¶ç§»é™¤å¹³å°ä¸­æ‰€æœ‰çš„ <code>console.log</code></p><h2 id="é™æ€èµ„æºåˆ†ç±»æ‰“åŒ…" tabindex="-1">é™æ€èµ„æºåˆ†ç±»æ‰“åŒ… <a class="header-anchor" href="#é™æ€èµ„æºåˆ†ç±»æ‰“åŒ…" aria-label="Permalink to &quot;é™æ€èµ„æºåˆ†ç±»æ‰“åŒ…&quot;">â€‹</a></h2><p><code>vite</code> æ˜¯åŸºäº <code>esbuild</code> å’Œ <code>rollup</code> æ„å»ºçš„ï¼Œåœ¨æ‰“åŒ…æ—¶å¦‚æœä¸è¿›è¡Œ <code>output</code> çš„é…ç½®ï¼Œå°±ä¼šæŠŠæ‰€æœ‰æ–‡ä»¶éƒ½æ··åœ¨ä¸€èµ·ï¼‰</p><p>åœ¨é…ç½®<code>output</code>åçš„æ•ˆæœï¼Œæ‰€æœ‰æ–‡ä»¶éƒ½è¿›è¡Œäº†åˆ†ç±»å­˜æ”¾ï¼Œè¿™ä¹Ÿæ–¹ä¾¿æˆ‘ä»¬æŸ¥æ‰¾æ–‡ä»¶</p><p>æ¥åˆ° vite.config.js æ–‡ä»¶ï¼Œå¯ä»¥çœ‹åˆ°æˆ‘ä»¬å¯¹ output è¿›è¡Œäº†å¦‚ä¸‹é…ç½®</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight has-highlighted-lines"><code><span class="line"><span style="color:#FFCB6B;">build</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#FFCB6B;">sourcemap</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// æ¶ˆé™¤æ‰“åŒ…å¤§å°è¶…è¿‡500kbè­¦å‘Š</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#FFCB6B;">chunkSizeWarningLimit</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">4000</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#FFCB6B;">rollupOptions</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#FFCB6B;">input</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#FFCB6B;">index</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">pathResolve</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">index.html</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line highlighted"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// é™æ€èµ„æºåˆ†ç±»æ‰“åŒ…</span></span>
<span class="line highlighted"><span style="color:#F07178;">    </span><span style="color:#FFCB6B;">output</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line highlighted"><span style="color:#F07178;">      </span><span style="color:#FFCB6B;">chunkFileNames</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">static/js/[name]-[hash].js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line highlighted"><span style="color:#F07178;">      </span><span style="color:#FFCB6B;">entryFileNames</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">static/js/[name]-[hash].js</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line highlighted"><span style="color:#F07178;">      </span><span style="color:#FFCB6B;">assetFileNames</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">static/[ext]/[name]-[hash].[ext]</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">ç›¸å…³æ¨è</p><p><a href="https://github.com/sanyuan0704/vite-plugin-chunk-split/blob/master/README-CN.md" target="_blank" rel="noreferrer">Vite ä»£ç æ‹†åŒ…æ’ä»¶ã€‚æ”¯æŒå¤šç§æ‹†åŒ…ç­–ç•¥ï¼Œå¯é¿å…æ‰‹åŠ¨æ“ä½œ manualChunks æ½œåœ¨çš„å¾ªç¯ä¾èµ–é—®é¢˜</a></p></div><h2 id="svg-å‹ç¼©" tabindex="-1"><code>svg</code> å‹ç¼© <a class="header-anchor" href="#svg-å‹ç¼©" aria-label="Permalink to &quot;\`svg\` å‹ç¼©&quot;">â€‹</a></h2><p>ä¸€èˆ¬ä¸‹è½½çš„ <code>svg</code> æˆ–è€…å¤åˆ¶çš„ <code>svg</code> ä»£ç ï¼Œé‡Œé¢å­˜åœ¨ä¸€äº›æ— å…³ç´§è¦çš„å…ƒç´ ï¼Œå¯ä»¥å°†å…¶å‰”é™¤ï¼Œæ¯«æ— å½±å“åœ°é™ä½ <code>svg</code> å¤§å°<br> å¹³å°ä½¿ç”¨äº† <a href="https://www.npmjs.com/package/svgo" target="_blank" rel="noreferrer">svgo</a> å·¥å…·å¯¹æ‰€æœ‰ <code>svg</code> è¿›è¡Œäº†å‹ç¼©ï¼Œæ‚¨æ‹‰å–å¹³å°ä»£ç æ—¶æ‰€æœ‰ <code>svg</code> éƒ½å·²ç»æœ€ç®€äº†å“¦ã€‚å½“ç„¶æ‚¨ä¼šé—®è‡ªå·±æ–°åŠ çš„ <code>svg</code> å¦‚ä½•ç²¾ç®€å‘¢ï¼Œæ¥åˆ° <a href="https://gitee.com/yiming_chang/pure-admin-thin/blob/main/package.json#L14" target="_blank" rel="noreferrer">main/package.json</a>ï¼Œå¯ä»¥çœ‹åˆ°å¹³å°é»˜è®¤ä½¿ç”¨ <code>svgo</code> å·¥å…·å¯¹ <code>src/assets/svg</code> æ–‡ä»¶å¤¹é‡Œçš„æ‰€æœ‰ <code>svg</code> è¿›è¡Œå‹ç¼©ï¼Œè¿™æ˜¯å¯ä»¥æ”¹åŠ¨çš„ï¼Œåªéœ€è¦å°† <code>-f</code> å’Œ <code>-o</code> åçš„è·¯å¾„æ”¹ä¸ºæ‚¨éœ€è¦å‹ç¼©çš„ <code>svg</code> è·¯å¾„å³å¯ã€‚æ¸©é¦¨æç¤ºï¼šåªéœ€è¦è¿è¡Œ <code>pnpm svgo</code> å‘½ä»¤å¯¹ <code>svg</code> æ–‡ä»¶è¿›è¡Œä¸€æ¬¡å‹ç¼©å³å¯</p>`,43),h={class:"tip custom-block"},F=s("p",{class:"custom-block-title"},"æ¨èé˜…è¯»",-1),C=s("a",{href:"https://cn.vuejs.org/guide/best-practices/performance.html",target:"_blank",rel:"noreferrer"},"æ€§èƒ½ä¼˜åŒ–",-1),m=s("a",{href:"https://router.vuejs.org/zh/guide/advanced/lazy-loading.html#%E4%BD%BF%E7%94%A8-vite",target:"_blank",rel:"noreferrer"},"Vite ä¸­ç»„ä»¶æŒ‰ç»„åˆ†å—æ‰“åŒ…",-1),A=s("div",{class:"tip custom-block"},[s("p",{class:"custom-block-title"},"ä¼ é€é—¨"),s("p",null,[s("a",{href:"https://yiming_chang.gitee.io/pure-admin-doc/pages/buildgood/#vite-%E8%87%AA%E8%BA%AB%E7%9A%84%E6%9E%84%E5%BB%BA%E4%BC%98%E5%8C%96",target:"_blank",rel:"noreferrer"},"åŸæ–‡åœ°å€")])],-1);function g(v,f,_,k,q,E){const a=o("Badge");return p(),c("div",null,[d,u,y,s("p",null,[n("ç‚¹å‡»æŸ¥çœ‹ "),b,n(),e(a,{text:"viteå®˜æ–¹æ–‡æ¡£"})]),D,s("div",h,[F,s("ul",null,[s("li",null,[C,n(),e(a,{text:"vueæ–‡æ¡£"})]),s("li",null,[m,n(),e(a,{text:"vue-routeræ–‡æ¡£"})])])]),A])}const S=l(i,[["render",g]]);export{P as __pageData,S as default};
