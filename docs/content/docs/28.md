---
author: 'bingkele'
title: 'å°ç¨‹åºä¸H5æ·±åº¦å¯¹æ¯”åŠåŸç†è§£æ'
date: '2024-5-10'
permalink: /content
---

# å°ç¨‹åºä¸ H5 æ·±åº¦å¯¹æ¯”åŠåŸç†è§£æ

> ä½ å†™è¿‡å°ç¨‹åº/H5ï¼Œé‚£ä½ çŸ¥é“ä»–ä»¬çš„åŒºåˆ«åœ¨å“ªé‡Œå—ï¼Ÿ ä¸ºä»€ä¹ˆè¯´å°ç¨‹åºçš„æ€§èƒ½é€šå¸¸ä¼˜äº H5? å°ç¨‹åºèƒ½è®¿é—®åˆ° DOM å¯¹è±¡å—ï¼Ÿ å°ç¨‹åºçš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ

## ä¸€. å°ç¨‹åº VS H5

å°ç¨‹åºå’Œ H5 éƒ½æ˜¯è½»é‡çº§çš„ã€å¯ç›´æ¥åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šè¿è¡Œçš„åº”ç”¨ï¼Œä½†å®ƒä»¬ä¹‹é—´å­˜åœ¨ä¸€äº›å…³é”®å·®å¼‚ã€‚

### **1. è¿è¡Œç¯å¢ƒ**

- **å°ç¨‹åº**ï¼šè¿è¡Œåœ¨ç‰¹å®šçš„ APPï¼ˆå¦‚å¾®ä¿¡ï¼Œæ”¯ä»˜å®ï¼‰å†…çš„ä¸€ä¸ªç‹¬ç«‹çš„è¿è¡Œç¯å¢ƒã€‚ğŸ“±
- **H5**ï¼šè¿è¡Œåœ¨å„ç§æµè§ˆå™¨ä¸­çš„ï¼Œè¿™äº›æµè§ˆå™¨åŸºæœ¬ä¸Šéƒ½éµå¾ªç›¸åŒçš„ Web æ ‡å‡†ï¼Œå› æ­¤ H5 åº”ç”¨å¯ä»¥åœ¨ä»»ä½•æ”¯æŒè¿™äº›æ ‡å‡†çš„æµè§ˆå™¨ä¸­è¿è¡Œã€‚ğŸŒ

### 2. å¼€å‘ç¯å¢ƒå’Œå·¥å…·

- **å°ç¨‹åº**ï¼šå¼€å‘éœ€è¦ä½¿ç”¨ç‰¹å®šçš„å¼€å‘å·¥å…·ï¼Œå¦‚å¾®ä¿¡å¼€å‘è€…å·¥å…·ï¼Œé˜¿é‡Œå·´å·´çš„ IDE ç­‰ã€‚ä½ åªèƒ½ä½¿ç”¨è¿™äº›å·¥å…·æä¾›çš„ API å’Œç»„ä»¶è¿›è¡Œå¼€å‘ï¼Œä¸èƒ½ä½¿ç”¨å¤§éƒ¨åˆ†çš„ç¬¬ä¸‰æ–¹åº“å’Œå·¥å…·ã€‚ğŸ› ï¸
- **H5**ï¼šå¼€å‘å·¥å…·å’Œåº“åˆ™éå¸¸ä¸°å¯Œã€‚ä½ å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚å’Œå–œå¥½é€‰æ‹©æœ€é€‚åˆçš„å·¥å…·è¿›è¡Œå¼€å‘ï¼Œå¼€å‘è‡ªç”±åº¦è¾ƒé«˜ã€‚ğŸ¨

### 3. **æ€§èƒ½å’Œä½“éªŒ**

- **å°ç¨‹åº**ï¼šç”±äºå°ç¨‹åºçš„ä»£ç è¿è¡Œåœ¨ä¸€ä¸ªç›¸å¯¹å°é—­å’Œä¼˜åŒ–è¿‡çš„ç¯å¢ƒä¸­ï¼Œå› æ­¤å…¶è¿è¡Œæ•ˆç‡å’Œæ€§èƒ½æ¯” H5 æ›´é«˜ã€‚è€Œä¸”å°ç¨‹åºå¯ä»¥å®ç°ç±»ä¼¼äºåŸç”Ÿ APP çš„ä½“éªŒï¼Œå¦‚ **ç¦»çº¿è®¿é—®ï¼Œæ·±åº¦é›†æˆ** ç­‰ã€‚ğŸš€
- **H5**ï¼šH5 çš„æ€§èƒ½å’Œä½“éªŒåˆ™å—åˆ°æµè§ˆå™¨çš„é™åˆ¶ã€‚è™½ç„¶ç°ä»£æµè§ˆå™¨çš„æ€§èƒ½å·²ç»éå¸¸å¥½ï¼Œä½†æ˜¯ç›¸å¯¹äºå°ç¨‹åºå’ŒåŸç”Ÿ APP æ¥è¯´ï¼ŒH5 åœ¨è¿è¡Œæ•ˆç‡å’Œç”¨æˆ·ä½“éªŒä¸Šè¿˜æ˜¯æœ‰æ‰€æ¬ ç¼ºã€‚ğŸ”

#### 3.1 å°ç¨‹åºçƒ­å¯åŠ¨

- **å°ç¨‹åº**ï¼šå½“ç”¨æˆ·ç¦»å¼€å°ç¨‹åºæˆ–è€…åˆ‡æ¢åˆ°å…¶ä»–åº”ç”¨ï¼Œå°ç¨‹åºå°±ä¼šè¢«æŒ‚èµ·æˆ–å…³é—­ã€‚å¦‚æœç”¨æˆ·åœ¨çŸ­æ—¶é—´å†…å›åˆ°å°ç¨‹åºï¼Œé€šå¸¸å¯ä»¥ç›´æ¥æ¢å¤ä¹‹å‰çš„çŠ¶æ€ï¼Œè¿™è¢«ç§°ä¸ºçƒ­å¯åŠ¨ã€‚ğŸ”¥
- **H5**ï¼šH5 åº”ç”¨çš„ç”Ÿå‘½å‘¨æœŸå–å†³äºæµè§ˆå™¨çš„ç”Ÿå‘½å‘¨æœŸã€‚å½“ç”¨æˆ·å…³é—­æµè§ˆå™¨æˆ–è€…æµè§ˆå™¨æ ‡ç­¾é¡µæ—¶ï¼ŒH5 åº”ç”¨ä¹Ÿå°±ç»“æŸäº†ã€‚åªæœ‰å½“ç”¨æˆ·é‡æ–°æ‰“å¼€æµè§ˆå™¨å¹¶è®¿é—®è¯¥ H5 åº”ç”¨æ—¶ï¼Œåº”ç”¨æ‰ä¼šé‡æ–°å¯åŠ¨ã€‚ğŸ”„
  > PSï¼š è¡¥å……æ¦‚å¿µ å†·å¯åŠ¨ï¼š å¦‚æœå°ç¨‹åºå·²ç»è¢«å®Œå…¨å…³é—­ï¼ˆä¾‹å¦‚ç”¨æˆ·æ‰‹åŠ¨å…³é—­äº†å°ç¨‹åºï¼Œæˆ–è€…ç”±äºç³»ç»Ÿèµ„æºç®¡ç†ç­–ç•¥å¯¼è‡´å°ç¨‹åºè¢«å…³é—­ï¼‰ï¼Œé‚£ä¹ˆç”¨æˆ·å›åˆ°å°ç¨‹åºæ—¶å°±éœ€è¦è¿›è¡Œå†·å¯åŠ¨ï¼Œå³é‡æ–°åŠ è½½å°ç¨‹åºçš„ä»£ç å¹¶å¯åŠ¨å°ç¨‹åºã€‚æ­¤å¤–ï¼Œå°ç¨‹åºçš„ä»£ç åœ¨é¦–æ¬¡æ‰“å¼€æ—¶ä¼šè¢«ä¸‹è½½åˆ°æœ¬åœ°ï¼Œå› æ­¤åœ¨åç»­çš„ä½¿ç”¨ä¸­ï¼Œå¯ä»¥ç›´æ¥ä»æœ¬åœ°åŠ è½½ä»£ç ï¼Œæ— éœ€é€šè¿‡ç½‘ç»œä¸‹è½½ã€‚

#### 3.2 ç¦»çº¿è®¿é—®

- **å°ç¨‹åº**ï¼šå°ç¨‹åºåœ¨é¦–æ¬¡æ‰“å¼€æ—¶ä¼šä¸‹è½½å¿…è¦çš„ä»£ç å’Œèµ„æºæ–‡ä»¶åˆ°æœ¬åœ°ï¼Œå› æ­¤åœ¨åç»­çš„ä½¿ç”¨ä¸­ï¼Œå³ä½¿æ²¡æœ‰ç½‘ç»œè¿æ¥ï¼Œä¹Ÿèƒ½å¤Ÿè¿è¡ŒåŸºæœ¬çš„åŠŸèƒ½ã€‚è¿™æä¾›äº†æ›´å¥½çš„ç¦»çº¿ä½“éªŒï¼Œå°¤å…¶åœ¨ç½‘ç»œç¯å¢ƒä¸ä½³çš„æƒ…å†µä¸‹ã€‚ğŸ“¡
- **H5**ï¼šç›¸æ¯”ä¹‹ä¸‹ï¼ŒH5 åº”ç”¨æ¯æ¬¡æ‰“å¼€éƒ½éœ€è¦ä»æœåŠ¡å™¨è·å–é¡µé¢å’Œèµ„æºï¼Œå¦‚æœæ²¡æœ‰ç½‘ç»œè¿æ¥ï¼Œå°±æ— æ³•æ­£å¸¸è®¿é—®ã€‚è™½ç„¶æœ‰ä¸€äº›æŠ€æœ¯ï¼ˆå¦‚ Service Workerï¼‰å¯ä»¥ä½¿ H5 åº”ç”¨å…·æœ‰ç¦»çº¿è®¿é—®çš„èƒ½åŠ›ï¼Œä½†è¿™éœ€è¦é¢å¤–çš„å¼€å‘å·¥ä½œï¼Œè€Œä¸”åœ¨å®é™…ä½¿ç”¨ä¸­å¯èƒ½ä¼šå—åˆ°è¯¸å¤šé™åˆ¶ã€‚ğŸ”ï¸

#### 3.3 æ·±åº¦é›†æˆï¼ˆç³»ç»Ÿæƒé™ï¼‰

- **å°ç¨‹åº**ï¼šå°ç¨‹åºè¿è¡Œåœ¨ç‰¹å®šçš„ APPï¼ˆå¦‚å¾®ä¿¡ï¼Œæ”¯ä»˜å®ï¼‰ä¸­ï¼Œå› æ­¤å¯ä»¥æ›´æ·±å…¥åœ°é›†æˆåˆ°è¿™ä¸ª APP çš„ç”Ÿæ€ç³»ç»Ÿä¸­ã€‚ä¾‹å¦‚ï¼Œå¾®ä¿¡å°ç¨‹åºå¯ä»¥ç›´æ¥ä½¿ç”¨å¾®ä¿¡çš„æ”¯ä»˜ã€åˆ†äº«ã€ç™»å½•ç­‰åŠŸèƒ½ï¼Œè¿™äº›éƒ½æ˜¯æµè§ˆå™¨æ— æ³•æä¾›çš„ã€‚ğŸŒ²
- **H5**ï¼šH5 åº”ç”¨åˆ™ä¸»è¦ä¾èµ–äºæµè§ˆå™¨æä¾›çš„æ ‡å‡† Web APIï¼Œæ— æ³•ç›´æ¥è®¿é—®è®¾å¤‡çš„æŸäº›åŠŸèƒ½æˆ–ç‰¹å®š APP çš„åŠŸèƒ½ã€‚è™½ç„¶ç°ä»£çš„æµè§ˆå™¨ API å·²ç»éå¸¸ä¸°å¯Œï¼Œä½†æ˜¯åœ¨æŸäº›ç‰¹å®šçš„åœºæ™¯ä¸‹ï¼ŒH5 åº”ç”¨å¯èƒ½æ— æ³•æä¾›å’Œå°ç¨‹åºæˆ–åŸç”Ÿåº”ç”¨åŒç­‰çš„ç”¨æˆ·ä½“éªŒã€‚ğŸŒ

### 4. æ›´æ–°æœºåˆ¶

- **å°ç¨‹åº**ï¼šå°ç¨‹åºçš„ä»£ç åŒ…åœ¨å‘å¸ƒæ–°ç‰ˆæœ¬åï¼Œéœ€è¦ç”¨æˆ·é‡æ–°æ‰“å¼€å°ç¨‹åºæ—¶æ‰ä¼šä¸‹è½½æ–°çš„ä»£ç åŒ…ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå°ç¨‹åºå¹³å°ä¼šåœ¨ç”¨æˆ·æ‰“å¼€å°ç¨‹åºæ—¶è¿›è¡Œç‰ˆæœ¬æ£€æŸ¥ï¼Œå¦‚æœå‘ç°æœ‰æ–°çš„ç‰ˆæœ¬ï¼Œå°±ä¼šè‡ªåŠ¨ä¸‹è½½æ–°ç‰ˆæœ¬çš„ä»£ç åŒ…ã€‚ğŸ”„
  - PS: å°ç¨‹åºå¹³å°é€šå¸¸æ”¯æŒå¢é‡æ›´æ–°ï¼Œå³åªä¸‹è½½å˜æ›´éƒ¨åˆ†çš„ä»£ç ï¼Œè¿™å¯ä»¥å‡å°‘ä¸‹è½½æ—¶é—´å’Œæµé‡æ¶ˆè€—ã€‚æ­¤å¤–ï¼Œå°ç¨‹åºå¹³å°ä¹Ÿå¯èƒ½æä¾›ä¸€äº›å…¶ä»–çš„æ›´æ–°æœºåˆ¶ï¼Œä¾‹å¦‚é¢„ä¸‹è½½ã€é™é»˜æ›´æ–°ç­‰ï¼Œè¿™äº›éƒ½å¯ä»¥å¸®åŠ©æå‡ç”¨æˆ·ä½“éªŒã€‚ğŸ“¦
- **H5**ï¼šH5 åº”ç”¨çš„æ›´æ–°æ›´ä¸ºç®€å•ï¼Œåªéœ€è¦åœ¨æœåŠ¡å™¨ç«¯æ›´æ–°ç½‘é¡µå’Œèµ„æºæ–‡ä»¶å³å¯ã€‚å½“ç”¨æˆ·ä¸‹æ¬¡è®¿é—®ç½‘é¡µæ—¶ï¼Œæµè§ˆå™¨å°±ä¼šè‡ªåŠ¨åŠ è½½æ–°çš„å†…å®¹ã€‚è¿™ç§æ–¹å¼çš„ä¼˜ç‚¹æ˜¯å¯ä»¥å³æ—¶æ¨é€æ›´æ–°ï¼Œæ— éœ€ç”¨æˆ·è¿›è¡Œä»»ä½•æ“ä½œï¼Œä½†æ˜¯ç¼ºç‚¹æ˜¯æ¯æ¬¡æ›´æ–°éƒ½éœ€è¦ç”¨æˆ·é‡æ–°åŠ è½½æ‰€æœ‰çš„å†…å®¹ï¼Œå³ä½¿åªæœ‰ä¸€å°éƒ¨åˆ†å‘ç”Ÿäº†å˜åŒ–ã€‚ğŸ›ï¸

### 5. æ¸²æŸ“æœºåˆ¶

#### 5.1 å°ç¨‹åºåŒçº¿ç¨‹æ¶æ„

- **å°ç¨‹åº**ï¼šé‡‡ç”¨çš„æ˜¯ä¸€ç§åˆ†ç¦»çš„æ¸²æŸ“æœºåˆ¶ã€‚åŒçº¿ç¨‹æ¶æ„ï¼Œé€»è¾‘å±‚å’Œæ¸²æŸ“å±‚æ˜¯åˆ†å¼€çš„ï¼Œå®ƒä»¬è¿è¡Œåœ¨ä¸¤ä¸ªä¸åŒçš„çº¿ç¨‹ä¸­ã€‚
  - é€»è¾‘å±‚è¿è¡Œåœ¨ JavaScriptCore ä¸­ï¼Œè´Ÿè´£æ•°æ®å¤„ç†å’Œäº‹ä»¶å¤„ç†ç­‰é€»è¾‘ï¼›
  - è€Œæ¸²æŸ“å±‚åˆ™è¿è¡Œåœ¨ WebView ä¸­ï¼Œè´Ÿè´£é¡µé¢çš„æ¸²æŸ“ã€‚
  - è¿™ä¸¤ä¸ªçº¿ç¨‹é€šè¿‡ä¸€ä¸ªæ•°æ®æ¡¥è¿›è¡Œé€šä¿¡ï¼ŒJS çº¿ç¨‹å°†éœ€è¦æ¸²æŸ“çš„æ•°æ®å‘é€åˆ°æ¸²æŸ“çº¿ç¨‹ï¼Œç„¶åç”±æ¸²æŸ“çº¿ç¨‹æ ¹æ®è¿™äº›æ•°æ®æ¥æ¸²æŸ“é¡µé¢ã€‚
  - **æ€§èƒ½æå‡**ï¼šç”±äºå°ç¨‹åºçš„æ¸²æŸ“è¿‡ç¨‹å¹¶ä¸ä¾èµ–äº JSï¼Œå› æ­¤å³ä½¿ JS çº¿ç¨‹å‘ç”Ÿé˜»å¡ï¼Œé¡µé¢çš„æ¸²æŸ“ä¹Ÿä¸ä¼šå—åˆ°å½±å“ã€‚è¿™ç§æœºåˆ¶æœ‰åˆ©äºæé«˜æ¸²æŸ“æ•ˆç‡ï¼Œå‡å°‘å¡é¡¿ï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚ğŸš¦
  - å°ç¨‹åºç”±äºä¸æ”¯æŒç›´æ¥æ“ä½œ DOMï¼Œå› æ­¤æ‰€æœ‰çš„é¡µé¢æ›´æ–°éƒ½æ˜¯é€šè¿‡æ•°æ®é©±åŠ¨çš„ï¼Œè¿™ä½¿å¾—ä»£ç æ›´ä¸ºç®€æ´ï¼Œæ˜“äºç»´æŠ¤ã€‚ğŸ“
- **H5**ï¼šä½¿ç”¨çš„æ˜¯ä¼ ç»Ÿçš„æµè§ˆå™¨æ¸²æŸ“æœºåˆ¶ã€‚å½“é¡µé¢çš„æ•°æ®æˆ–çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒJavaScript ä¼šç›´æ¥æ“ä½œ DOMï¼Œä¿®æ”¹é¡µé¢çš„å†…å®¹ã€‚æµè§ˆå™¨ä¼šç›‘å¬è¿™äº›æ“ä½œï¼Œå½“ DOM å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šé‡æ–°è®¡ç®—æ ·å¼ï¼Œç”Ÿæˆæ–°çš„å¸ƒå±€ï¼Œç„¶åç»˜åˆ¶åˆ°å±å¹•ä¸Šã€‚è¿™ç§æ–¹å¼çš„ä¼˜ç‚¹æ˜¯çµæ´»ï¼Œå¯ä»¥å®ç°å„ç§å¤æ‚çš„æ•ˆæœå’Œäº¤äº’ï¼Œä½†æ˜¯ç¼ºç‚¹æ˜¯æ€§èƒ½å¼€é”€æ¯”è¾ƒå¤§ï¼Œå¦‚æœæ“ä½œä¸å½“ï¼Œå¯èƒ½ä¼šå¯¼è‡´é¡µé¢å¡é¡¿æˆ–é—ªçƒã€‚ğŸ–¥ï¸

#### 5.2 DOM è®¿é—®

- **å°ç¨‹åº**ï¼šä¸­è®¿é—®ä¸åˆ° DOMï¼šå°ç¨‹åºçš„å®¿ä¸»ç¯å¢ƒæ˜¯åŸºäºæµè§ˆå™¨å†…æ ¸é‡æ„çš„å†…ç½®è§£æå™¨ï¼Œå®ƒå¹¶ä¸æ˜¯ä¸€ä¸ªå®Œæ•´çš„æµè§ˆå™¨ï¼Œå®˜æ–¹æ–‡æ¡£ä¸­é‡ç‚¹å¼ºè°ƒäº†è„šæœ¬å†…æ— æ³•ä½¿ç”¨æµè§ˆå™¨ä¸­å¸¸ç”¨çš„ window å¯¹è±¡å’Œ document å¯¹è±¡ï¼Œå°±æ˜¯æ²¡æœ‰ DOM å’Œ BOM çš„ç›¸å…³çš„ APIï¼Œè¿™ä¸€æ¡å°±å¹²æ‰äº† JQ å’Œä¸€äº›ä¾èµ–äº BOM å’Œ DOM çš„ NPM åŒ…ã€‚ä¹Ÿé€ æˆå†å®ç°ä¸€äº›è´Ÿè´£åŠ¨ç”»çš„æƒ…å†µä¸‹ï¼Œå°ç¨‹åºä¼˜åŠ¿ä¸å¦‚ H5ğŸ§

### 6. å¼€å‘æˆæœ¬

#### 6.1 ç”Ÿæ€ & å­¦ä¹ æˆæœ¬

- **å°ç¨‹åº**ï¼šå°ç¨‹åºè„±ç¦» W3C æ ‡å‡†ï¼Œå¾ˆå¤šç¬¬ä¸‰æ–¹åº“ä¸èƒ½ç›´æ¥ä½¿ç”¨äº†ã€‚å°ç¨‹åºæœ¬èº«ä¼šå¢åŠ å­¦ä¹ æˆæœ¬ã€‚ğŸ“š

#### 6.2 å…¼å®¹æ€§

- **å°ç¨‹åº**ï¼šå°ç¨‹åºçš„å…¼å®¹æ€§ä¸»è¦å–å†³äºå°ç¨‹åºå¹³å°ã€‚ç”±äºæ¯ä¸ªå°ç¨‹åºå¹³å°ï¼ˆä¾‹å¦‚å¾®ä¿¡ã€æ”¯ä»˜å®ï¼‰éƒ½æœ‰è‡ªå·±çš„ API å’Œè§„èŒƒï¼Œæ‰€ä»¥ä¸€ä¸ªå°ç¨‹åºå¯èƒ½éœ€è¦é’ˆå¯¹ä¸åŒçš„å¹³å°è¿›è¡Œé€‚é…æˆ–ä¿®æ”¹ã€‚æ­¤å¤–ï¼Œå°ç¨‹åºä¹Ÿéœ€è¦è€ƒè™‘ä¸åŒçš„è®¾å¤‡å’Œæ“ä½œç³»ç»Ÿï¼Œä¾‹å¦‚ä¸åŒçš„æ‰‹æœºå‹å·ã€å±å¹•å¤§å°ã€ç³»ç»Ÿç‰ˆæœ¬ç­‰ã€‚ğŸ”„
- **H5**ï¼šH5 çš„å…¼å®¹æ€§ä¸»è¦å–å†³äºæµè§ˆå™¨ã€‚ç”±äºå­˜åœ¨å¤§é‡ä¸åŒçš„æµè§ˆå™¨å’Œç‰ˆæœ¬ï¼ŒH5 å¼€å‘è€…éœ€è¦ç¡®ä¿ä»–ä»¬çš„åº”ç”¨èƒ½åœ¨å„ç§æµè§ˆå™¨ä¸­æ­£å¸¸è¿è¡Œã€‚è¿™å¯èƒ½æ¶‰åŠåˆ°ä¸€äº›å¤æ‚çš„é—®é¢˜ï¼Œå¦‚æµè§ˆå™¨å·®å¼‚ã€ç‰¹æ€§æ£€æµ‹ã€é™çº§ç­–ç•¥ç­‰ã€‚æ­¤å¤–ï¼ŒH5 åº”ç”¨ä¹Ÿéœ€è¦é€‚åº”å„ç§ä¸åŒçš„è®¾å¤‡å’Œå±å¹•ï¼Œè¿™å¯èƒ½éœ€è¦ä½¿ç”¨å“åº”å¼è®¾è®¡æˆ–å…¶ä»–æŠ€æœ¯ã€‚ğŸŒŸ

## äºŒ. çŸ¥è¯†ç‚¹è¡¥å……

### 1. å°ç¨‹åºå¢é‡æ›´æ–°æ˜¯å¦‚ä½•åšçš„ï¼Ÿ

å°ç¨‹åºçš„å¢é‡æ›´æ–°æœºåˆ¶ä¸»è¦ä¾èµ–äºå°ç¨‹åºå¹³å°çš„è®¾è®¡ã€‚å…·ä½“å®ç°å¯èƒ½å› ä¸åŒçš„å°ç¨‹åºå¹³å°ï¼ˆå¦‚å¾®ä¿¡ã€æ”¯ä»˜å®ç­‰ï¼‰è€Œæœ‰æ‰€ä¸åŒã€‚ä»¥ä¸‹æ˜¯ä¸€ç§å¯èƒ½çš„å®ç°æ–¹å¼ï¼š

- å½“å°ç¨‹åºå¼€å‘è€…å‘å¸ƒæ–°ç‰ˆæœ¬æ—¶ï¼Œå°ç¨‹åºå¹³å°ä¼šæ¯”è¾ƒæ–°æ—§ä¸¤ä¸ªç‰ˆæœ¬çš„å·®å¼‚ï¼Œå¹¶ç”Ÿæˆä¸€ä¸ªåŒ…å«å·®å¼‚ä¿¡æ¯çš„è¡¥ä¸æ–‡ä»¶ã€‚
- ç„¶åï¼Œå½“ç”¨æˆ·æ‰“å¼€å°ç¨‹åºæ—¶ï¼Œå°ç¨‹åºå¹³å°ä¼šæ£€æŸ¥ç”¨æˆ·è®¾å¤‡ä¸Šçš„å°ç¨‹åºç‰ˆæœ¬ã€‚å¦‚æœå‘ç°ç”¨æˆ·çš„ç‰ˆæœ¬è½åäºæœåŠ¡å™¨ä¸Šçš„ç‰ˆæœ¬ï¼Œé‚£ä¹ˆå°±ä¼šä¸‹è½½è¡¥ä¸æ–‡ä»¶ï¼Œè€Œä¸æ˜¯æ•´ä¸ªæ–°ç‰ˆæœ¬çš„ä»£ç åŒ…ã€‚
- æ¥ç€ï¼Œå°ç¨‹åºå¹³å°ä¼šåº”ç”¨è¡¥ä¸æ–‡ä»¶ï¼Œå°†ç”¨æˆ·è®¾å¤‡ä¸Šçš„å°ç¨‹åºæ›´æ–°åˆ°æ–°ç‰ˆæœ¬ã€‚

è¿™ç§å¢é‡æ›´æ–°çš„æ–¹å¼å¯ä»¥å¤§å¤§å‡å°‘éœ€è¦ä¸‹è½½çš„æ•°æ®é‡ï¼Œä»è€Œæé«˜æ›´æ–°é€Ÿåº¦ï¼ŒèŠ‚çœç”¨æˆ·çš„ç½‘ç»œæµé‡ã€‚æ­¤å¤–ï¼Œå› ä¸ºè¡¥ä¸æ–‡ä»¶åªåŒ…å«å·®å¼‚ä¿¡æ¯ï¼Œæ‰€ä»¥å®ƒé€šå¸¸æ¯”å®Œæ•´çš„ä»£ç åŒ…è¦å°å¾—å¤šï¼Œè¿™ä½¿å¾—å°ç¨‹åºå¯ä»¥æ›´å¿«åœ°å¯åŠ¨å’Œè¿è¡Œã€‚

ç„¶è€Œï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå¢é‡æ›´æ–°éœ€è¦å°ç¨‹åºå¹³å°æä¾›ç›¸åº”çš„æ”¯æŒï¼Œå¦‚æœå°ç¨‹åºå¹³å°ä¸æ”¯æŒå¢é‡æ›´æ–°ï¼Œé‚£ä¹ˆå°ç¨‹åºåœ¨æ›´æ–°æ—¶å°±éœ€è¦ä¸‹è½½æ•´ä¸ªæ–°ç‰ˆæœ¬çš„ä»£ç åŒ…ã€‚æ­¤å¤–ï¼Œå³ä½¿å°ç¨‹åºå¹³å°æ”¯æŒå¢é‡æ›´æ–°ï¼Œä¹Ÿå¯èƒ½å­˜åœ¨ä¸€äº›é™åˆ¶æˆ–è¦æ±‚ï¼Œä¾‹å¦‚å¯¹ä»£ç åŒ…çš„å¤§å°æˆ–ç»“æ„æœ‰ç‰¹å®šçš„è§„å®šç­‰ã€‚

ä»¥ä¸Šæ˜¯ä¸€ç§å¯èƒ½çš„å®ç°æ–¹å¼ï¼Œå…·ä½“çš„å¢é‡æ›´æ–°æœºåˆ¶å¯èƒ½ä¼šå› ä¸åŒçš„å°ç¨‹åºå¹³å°è€Œæœ‰æ‰€ä¸åŒã€‚è¦è·å–æ›´å‡†ç¡®çš„ä¿¡æ¯ï¼Œå»ºè®®å‚è€ƒå…·ä½“çš„å°ç¨‹åºå¹³å°çš„å®˜æ–¹æ–‡æ¡£æˆ–è€…èµ„æºã€‚

### 2. å°ç¨‹åºçš„åŒçº¿ç¨‹æ¶æ„çš„åŸç†ï¼Ÿ

å°ç¨‹åºçš„åŒçº¿ç¨‹æ¶æ„æ˜¯æŒ‡å…¶åœ¨è¿è¡Œæ—¶æœ‰ä¸¤ä¸ªä¸»è¦çš„çº¿ç¨‹è´Ÿè´£å¤„ç†ä¸åŒçš„ä»»åŠ¡ï¼šä¸€ä¸ªæ˜¯æ¸²æŸ“çº¿ç¨‹ï¼ˆRender Threadï¼‰ï¼Œå¦ä¸€ä¸ªæ˜¯é€»è¾‘çº¿ç¨‹ï¼ˆLogic Threadï¼‰ã€‚

- **æ¸²æŸ“çº¿ç¨‹** ä¸»è¦è´Ÿè´£é¡µé¢çš„æ¸²æŸ“å·¥ä½œï¼ŒåŒ…æ‹¬è§£æå’Œå±•ç¤º HTMLã€CSS ä»¥åŠå¤„ç†ç”¨æˆ·çš„äº¤äº’äº‹ä»¶ï¼ˆå¦‚ç‚¹å‡»ã€æ»‘åŠ¨ç­‰ï¼‰ã€‚åœ¨å°ç¨‹åºä¸­ï¼Œæ¸²æŸ“çº¿ç¨‹é€šå¸¸æ˜¯åœ¨ Webview ä¸­è¿è¡Œçš„ï¼Œè¿™ä½¿å¾—å°ç¨‹åºèƒ½å¤Ÿåˆ©ç”¨ Web æŠ€æœ¯è¿›è¡Œé¡µé¢çš„æ¸²æŸ“ã€‚
- **é€»è¾‘çº¿ç¨‹** åˆ™ä¸»è¦è´Ÿè´£å¤„ç†åº”ç”¨çš„é€»è¾‘ï¼ŒåŒ…æ‹¬å¤„ç† API è°ƒç”¨ã€è¯·æ±‚æ•°æ®ã€å¤„ç†æ•°æ®ç­‰ã€‚åœ¨å°ç¨‹åºä¸­ï¼Œé€»è¾‘çº¿ç¨‹é€šå¸¸æ˜¯åœ¨ JSCore ä¸­è¿è¡Œçš„ï¼Œè¿™ä½¿å¾—å°ç¨‹åºèƒ½å¤Ÿåˆ©ç”¨ JavaScript æ¥ç¼–å†™åº”ç”¨é€»è¾‘ã€‚

è¿™ä¸¤ä¸ªçº¿ç¨‹æ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œå®ƒä»¬åœ¨è¿è¡Œæ—¶å¹¶ä¸å…±äº«ä»»ä½• JavaScript å¯¹è±¡æˆ–å‡½æ•°ã€‚è¿™æ„å‘³ç€ï¼Œå°ç¨‹åºåœ¨è¿›è¡Œé¡µé¢æ¸²æŸ“å’Œå¤„ç†åº”ç”¨é€»è¾‘æ—¶ï¼Œå¯ä»¥åˆ©ç”¨å¤šæ ¸ CPU çš„å¹¶è¡Œè®¡ç®—èƒ½åŠ›ï¼Œæé«˜è¿è¡Œæ•ˆç‡ã€‚

ç„¶è€Œï¼Œè¿™ä¸¤ä¸ªçº¿ç¨‹ä¹‹é—´ä»ç„¶éœ€è¦è¿›è¡Œé€šä¿¡ã€‚è¿™æ˜¯é€šè¿‡ä¸€ç§ç§°ä¸ºæ•°æ®æ¡¥ï¼ˆData Bridgeï¼‰çš„æœºåˆ¶å®ç°çš„ã€‚é€»è¾‘çº¿ç¨‹å°†éœ€è¦æ¸²æŸ“çš„æ•°æ®é€šè¿‡æ•°æ®æ¡¥å‘é€åˆ°æ¸²æŸ“çº¿ç¨‹ï¼Œç„¶åç”±æ¸²æŸ“çº¿ç¨‹æ ¹æ®è¿™äº›æ•°æ®æ¥æ¸²æŸ“é¡µé¢ã€‚è¿™ç§é€šä¿¡æœºåˆ¶æœ‰åˆ©äºéš”ç¦»æ¸²æŸ“å’Œé€»è¾‘å¤„ç†ï¼Œé˜²æ­¢ JS çš„é˜»å¡å½±å“åˆ°é¡µé¢çš„æ¸²æŸ“ï¼Œä»è€Œæé«˜ç”¨æˆ·ä½“éªŒã€‚

åŒçº¿ç¨‹æ¶æ„çš„ä¼˜ç‚¹æ˜¯å¯ä»¥æé«˜æ•ˆç‡ï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚ä½†æ˜¯ï¼Œç”±äºæ¸²æŸ“çº¿ç¨‹å’Œé€»è¾‘çº¿ç¨‹æ˜¯åˆ†ç¦»çš„ï¼Œå› æ­¤å°ç¨‹åºä¸èƒ½ç›´æ¥æ“ä½œ DOMï¼Œæ‰€æœ‰çš„é¡µé¢æ›´æ–°éƒ½æ˜¯é€šè¿‡æ•°æ®é©±åŠ¨çš„ï¼Œè¿™ä½¿å¾—å°ç¨‹åºåœ¨å¤„ç†å¤æ‚çš„é¡µé¢å¸ƒå±€å’Œäº¤äº’æ—¶å¯èƒ½ä¼šæœ‰äº›é™åˆ¶ã€‚

#### ä¼ªä»£ç æ¨¡æ‹Ÿ

å°ç¨‹åºçš„åŒçº¿ç¨‹æ¶æ„æ˜¯ç”±å°ç¨‹åºçš„è¿è¡Œç¯å¢ƒæ‰€æ”¯æŒçš„ï¼Œå¹¶éå¯ä»¥ç®€å•é€šè¿‡ä¸€æ®µ JavaScript ä»£ç æ¥æ¨¡æ‹Ÿå®ç°ã€‚å®é™…ä¸Šï¼Œè¦å®ç°è¿™æ ·çš„æ¶æ„ï¼Œä½ éœ€è¦ä¸€ä¸ªå¯ä»¥è¿è¡Œä¸¤ä¸ªç‹¬ç«‹ JavaScript ç¯å¢ƒçš„è¿è¡Œæ—¶ï¼Œå¹¶ä¸”è¿˜éœ€è¦ä¸€ä¸ªæ•°æ®æ¡¥æ¥åœ¨è¿™ä¸¤ä¸ªç¯å¢ƒä¹‹é—´è¿›è¡Œé€šä¿¡ã€‚è¿™æ¶‰åŠåˆ°å¾ˆå¤šåº•å±‚çš„å®ç°ç»†èŠ‚ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œæ— æ³•åœ¨æµè§ˆå™¨ç¯å¢ƒä¸­ç›´æ¥å®ç°ã€‚

ä½†æ˜¯ï¼Œä¸ºäº†å¸®åŠ©ä½ ç†è§£è¿™ä¸ªæ¦‚å¿µï¼Œæˆ‘å¯ä»¥æä¾›ä¸€ä¸ªåŸºæœ¬çš„æ¨¡å‹ï¼Œæ¥è¯´æ˜æ¸²æŸ“çº¿ç¨‹å’Œé€»è¾‘çº¿ç¨‹æ˜¯å¦‚ä½•å·¥ä½œå’Œäº¤äº’çš„ã€‚è¯·æ³¨æ„ï¼Œè¿™åªæ˜¯ä¸€ä¸ªç®€åŒ–çš„æ¨¡å‹ï¼ŒçœŸå®çš„å°ç¨‹åºæ¶æ„ä¼šæ›´åŠ å¤æ‚ã€‚

é¦–å…ˆï¼Œæˆ‘ä»¬å¯ä»¥å‡è®¾æœ‰ä¸¤ä¸ªçº¿ç¨‹ï¼š`renderThread` å’Œ `logicThread`ï¼Œå®ƒä»¬éƒ½æ˜¯å¼‚æ­¥è¿è¡Œçš„ã€‚

```javascript
// æ¸²æŸ“çº¿ç¨‹
async function renderThread(dataBridge) {
  let data = await dataBridge.receive()
  render(data)
}

// é€»è¾‘çº¿ç¨‹
async function logicThread(dataBridge) {
  let data = await fetchData()
  dataBridge.send(data)
}
```

è¿™ä¸¤ä¸ªçº¿ç¨‹é€šè¿‡ä¸€ä¸ª `dataBridge` è¿›è¡Œé€šä¿¡ã€‚è¿™ä¸ª `dataBridge` éœ€è¦æœ‰ `send` å’Œ `receive` ä¸¤ä¸ªæ–¹æ³•ï¼Œç”¨äºåœ¨ä¸¤ä¸ªçº¿ç¨‹ä¹‹é—´å‘é€å’Œæ¥æ”¶æ•°æ®ã€‚

```javascript
// æ•°æ®æ¡¥
class DataBridge {
  constructor() {
    this.queue = []
    this.listeners = []
  }

  send(data) {
    this.queue.push(data)
    this.listeners.forEach((listener) => listener(data))
  }

  receive() {
    return new Promise((resolve) => {
      if (this.queue.length > 0) {
        resolve(this.queue.shift())
      } else {
        this.listeners.push(resolve)
      }
    })
  }
}
```

ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ª `dataBridge`ï¼Œå¹¶å°†å®ƒä¼ ç»™ `renderThread` å’Œ `logicThread`ï¼Œè®©å®ƒä»¬å¼€å§‹è¿è¡Œã€‚

```javascript
let dataBridge = new DataBridge()

renderThread(dataBridge)
logicThread(dataBridge)
```

å½“ `logicThread` å¤„ç†å®Œé€»è¾‘å¹¶è·å–åˆ°æ•°æ®åï¼Œå®ƒä¼šé€šè¿‡ `dataBridge` å°†æ•°æ®å‘é€ç»™ `renderThread`ï¼Œç„¶å `renderThread` å°±å¯ä»¥æ ¹æ®è¿™äº›æ•°æ®æ¥æ¸²æŸ“é¡µé¢ã€‚

è¯·æ³¨æ„ï¼Œè¿™åªæ˜¯ä¸€ä¸ªéå¸¸ç®€åŒ–çš„æ¨¡å‹ï¼ŒçœŸå®çš„å°ç¨‹åºæ¶æ„ä¼šæ›´åŠ å¤æ‚ã€‚åœ¨å®é™…çš„å°ç¨‹åºç¯å¢ƒä¸­ï¼Œè¿˜éœ€è¦å¤„ç†å¾ˆå¤šå…¶ä»–çš„é—®é¢˜ï¼Œå¦‚æ•°æ®åŒæ­¥ã€é”™è¯¯å¤„ç†ã€èµ„æºç®¡ç†ç­‰ã€‚å¹¶ä¸”ï¼Œç”±äºå°ç¨‹åºçš„è¿è¡Œç¯å¢ƒä¸æµè§ˆå™¨ç¯å¢ƒä¸åŒï¼Œå› æ­¤åœ¨å¤„ç†ä¸€äº›ç‰¹å®šçš„é—®é¢˜æ—¶ï¼Œå¯èƒ½éœ€è¦ä½¿ç”¨ä¸åŒçš„æ–¹æ³•å’ŒæŠ€æœ¯ã€‚

### å‚è€ƒèµ„æº

::: tip ä¼ é€é—¨
[å°ç¨‹åºå¼€æ”¾æ–‡æ¡£](https://developers.weixin.qq.com/miniprogram/dev/framework/)

[åŸæ–‡åœ°å€](https://juejin.cn/post/7239336033367277629?searchId=202403251501226392B9EF59D62C182963)
:::
